<!doctype html>
<html lang="hu">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Számológép</title>
<style>
  body{
    margin:0;
    min-height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
    background-color: black;
  }
  #title{
    top: 20px;
    color: wheat;
    font-size: 1.5rem;
  }
  .calculator{
    width:420px;
    max-width:100vw;
    border-radius:16px;
    padding:20px;
  }
  .grid{
    display:grid;
    grid-template-columns:repeat(4,1fr);
    grid-template-rows:repeat(5,80px);
    gap:10px;
  }
  .display{
    grid-column:1/4;
    background: whitesmoke;
    border-radius:10px;
    display:flex;
    flex-direction:column;
    align-items:flex-end;
    justify-content:center;
    padding:8px 14px;
    overflow:hidden;
  }
  .expr{
    font-size:1em;
    color:#9ca3af;
    height:20px;
  }
  .result{
    font-size:1.8em;
    color:black;
  }
  button{
    border:0;
    background:#2b3652;
    color:white;
    font-size:1.4em;
    border-radius:10px;
    cursor:pointer;
    transition:0.1s;
  }
  button:hover{ background:#21366b; }
  .op{ background:rgb(54, 124, 148); }
  .equals{ background: green; }
  .clear{ background:red; }
</style>
</head>
<body>
  <div id="title">
    <h1>Számológép</h1>
    <p>Varga Dávid, Verhás Gergő</p>
  </div>
  <div class="calculator">
    <div class="grid" id="grid"></div>
  </div>

<script>
  const grid = document.getElementById("grid")

  const display = document.createElement("div")
  display.className = "display"
  display.innerHTML = `<div class="expr"></div><div class="result">0</div>`
  grid.appendChild(display)

  const exprDiv = display.querySelector(".expr")
  const resultDiv = display.querySelector(".result")

  const clearBtn = document.createElement("button")
  clearBtn.textContent = "C"
  clearBtn.className = "clear"
  grid.appendChild(clearBtn)

  const buttons = [
    ["7","8","9","/"],
    ["4","5","6","*"],
    ["1","2","3","-"],
    ["0",",","=","+"]
  ]

  buttons.flat().forEach(label=>{
    const btn = document.createElement("button")
    btn.textContent = label

    if (["+","-","*","/"].includes(label)) 
      btn.classList.add("op");
    if (label === "=") 
      btn.classList.add("equals");

    btn.addEventListener("click", ()=>handleInput(label))
    grid.appendChild(btn)
  })
  clearBtn.addEventListener("click", ()=>{
    exprDiv.textContent = ""
    resultDiv.textContent = "0"
  })

  function handleInput(val){
    if(val === "="){
      try {
        let expr = resultDiv.textContent.replace(",",".")
        let result = eval(expr)
        exprDiv.textContent = resultDiv.textContent
        resultDiv.textContent = result.toString().replace(".",",")
      } catch {
        exprDiv.textContent = ""
        resultDiv.textContent = "Hiba"
      }
    } else {
      if(resultDiv.textContent === "0" || resultDiv.textContent === "Hiba"){
        resultDiv.textContent = val
      } else {
        resultDiv.textContent += val
      }
    }
  }

</script>
</body>
</html>
